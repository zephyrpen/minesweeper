<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minesweeper ‚Äî 3 Levels</title>
  <style>
    :root{
      --bg:#f4f6fa;
      --panel:#ffffff;
      --border:#d1d5db;
      --text:#111827;
      --muted:#6b7280;
      --accent:#3b82f6;
      --accent-2:#2563eb;
      --danger:#ef4444;
      --warning:#f59e0b;
      --success:#22c55e;
      --tile:#f9fafb;
      --tile-hover:#e5e7eb;
      --tile-revealed:#f1f5f9;
      --radius:12px;
      --shadow:0 4px 15px rgba(0,0,0,.1);
    }
    
    *{box-sizing:border-box;}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: 'Segoe UI',sans-serif; display:flex; flex-direction:column; align-items:center; min-height:100vh; padding:20px;
    }

    h1{margin-bottom:10px;}

    header{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:15px 25px; margin-bottom:20px; text-align:center;}
    select,button{border:1px solid var(--border); border-radius:var(--radius); padding:8px 12px; margin:5px; background:#fff; font-weight:600; cursor:pointer;}
    button.primary{background:var(--accent); color:#fff; border:none;}
    button.primary:hover{background:var(--accent-2);}

    .stats{display:flex; gap:10px; justify-content:center; margin:10px;}
    .stat{background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:8px 12px; box-shadow:var(--shadow);}

    .board{display:grid; gap:4px; justify-content:center; background:var(--panel); border-radius:var(--radius); border:1px solid var(--border); padding:10px;}

    .cell{
      width:28px; height:28px; display:grid; place-items:center; background:var(--tile); border:1px solid var(--border); border-radius:6px; cursor:pointer; font-weight:600;
    }
    .cell:hover{background:var(--tile-hover);}  
    .cell.revealed{background:var(--tile-revealed); cursor:default;}
    .cell.flag{color:var(--warning);}
    .cell.mine{color:var(--danger);}
    .n1{color:#3b82f6;} .n2{color:#16a34a;} .n3{color:#dc2626;} .n4{color:#9333ea;} .n5{color:#ea580c;} .n6{color:#0891b2;} .n7{color:#71717a;} .n8{color:#000;}
  </style>
</head>
<body>
  <header>
    <h1>üí£ Minesweeper ‚Äî 3 Levels</h1>
    <div>
      <label>Level:</label>
      <select id="difficulty">
        <option value="10x10x10">Level 1 (10√ó10 ¬∑ 10 mines)</option>
        <option value="20x20x40">Level 2 (20√ó20 ¬∑ 40 mines)</option>
        <option value="30x30x90" selected>Level 3 (30√ó30 ¬∑ 90 mines)</option>
      </select>
      <button id="newGame" class="primary">New Game</button>
    </div>
    <div class="stats">
      <div class="stat">‚è±Ô∏è Time: <b id="timer">0</b>s</div>
      <div class="stat">üí£ Left: <b id="minesLeft">0</b></div>
      <div class="stat">‚úÖ Cleared: <b id="safeCells">0</b></div>
    </div>
  </header>

  <div class="board" id="board"></div>

  <script>
    const boardEl = document.getElementById('board');
    const diffEl = document.getElementById('difficulty');
    const timerEl = document.getElementById('timer');
    const minesLeftEl = document.getElementById('minesLeft');
    const safeCellsEl = document.getElementById('safeCells');
    const newGameBtn = document.getElementById('newGame');

    let rows=30, cols=30, mines=90;
    let grid=[]; let firstClick=true; let revealedCount=0; let flags=0; let timer=null; let time=0; let gameOver=false;

    const DIFF={ '10x10x10':[10,10,10], '20x20x40':[20,20,40], '30x30x90':[30,30,90] };

    function init(){
      [rows,cols,mines]=DIFF[diffEl.value];
      boardEl.innerHTML=''; boardEl.style.gridTemplateColumns=`repeat(${cols},auto)`;
      grid=[]; firstClick=true; revealedCount=0; flags=0; time=0; gameOver=false;
      timerEl.textContent='0'; minesLeftEl.textContent=mines; safeCellsEl.textContent='0';
      if(timer){clearInterval(timer);timer=null;}

      for(let r=0;r<rows;r++){
        grid[r]=[];
        for(let c=0;c<cols;c++){
          const el=document.createElement('div'); el.className='cell';
          boardEl.appendChild(el);
          const cell={r,c,mine:false,count:0,flag:false,revealed:false,el};
          el.addEventListener('click',()=>clickCell(cell));
          el.oncontextmenu=(e)=>{e.preventDefault();toggleFlag(cell);};
          grid[r][c]=cell;
        }
      }
    }

    function startTimer(){ if(timer) return; timer=setInterval(()=>{time++;timerEl.textContent=time;},1000); }

    function neighbors(r,c){const list=[];for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){if(dr||dc){let nr=r+dr,nc=c+dc;if(nr>=0&&nr<rows&&nc>=0&&nc<cols)list.push(grid[nr][nc]);}}return list;}

    function placeMines(sr,sc){let placed=0;while(placed<mines){let r=Math.floor(Math.random()*rows),c=Math.floor(Math.random()*cols);if(Math.abs(r-sr)<=1&&Math.abs(c-sc)<=1)continue;const cell=grid[r][c];if(!cell.mine){cell.mine=true;placed++;}}for(let r=0;r<rows;r++)for(let c=0;c<cols;c++){if(!grid[r][c].mine){grid[r][c].count=neighbors(r,c).filter(n=>n.mine).length;}}}

    function reveal(cell){if(cell.revealed||cell.flag||gameOver)return;cell.revealed=true;cell.el.classList.add('revealed');if(cell.mine){cell.el.textContent='üí£';gameOver=true;alert('üí• Boom!');return;}revealedCount++;safeCellsEl.textContent=revealedCount;if(cell.count>0){cell.el.textContent=cell.count;cell.el.classList.add('n'+cell.count);}else{neighbors(cell.r,cell.c).forEach(n=>{if(!n.revealed)reveal(n);});}if(revealedCount===rows*cols-mines){alert(`üéâ Win in ${time}s!`);gameOver=true;}}

    function clickCell(cell){if(firstClick){placeMines(cell.r,cell.c);firstClick=false;startTimer();}reveal(cell);}

    function toggleFlag(cell){if(cell.revealed||gameOver)return;cell.flag=!cell.flag;cell.el.textContent=cell.flag?'üö©':'';flags+=cell.flag?1:-1;minesLeftEl.textContent=mines-flags;}

    newGameBtn.addEventListener('click',init);
    diffEl.addEventListener('change',init);
    init();
  </script>
</body>
</html>
