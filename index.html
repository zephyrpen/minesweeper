<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéÄ Cute Classroom Minesweeper</title>
  <style>
    :root{
      --bg:#fff8f0;
      --panel:#fff;
      --border:#fcd9b8;
      --text:#4b2e05;
      --muted:#996b3b;
      --accent:#ffb86b;
      --accent-2:#ff9f43;
      --danger:#ef4444;
      --warning:#f59e0b;
      --success:#22c55e;
      --tile:#fff4e0;
      --tile-hover:#ffe3c8;
      --tile-revealed:#fff0da;
      --radius:12px;
      --shadow:0 4px 12px rgba(0,0,0,.1);
    }
    *{box-sizing:border-box;}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:'Comic Sans MS','Segoe UI',sans-serif;
      display:flex; flex-direction:column; align-items:center; min-height:100vh; padding:20px;
    }

    h1{margin:10px 0; text-shadow:1px 1px 0 #fff;}

    header{
      background:var(--panel); border:2px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:15px 25px; margin-bottom:20px; text-align:center;
    }

    select,button{
      border:2px solid var(--border); border-radius:var(--radius); padding:8px 12px; margin:5px;
      background:var(--accent); color:#fff; font-weight:600; cursor:pointer;
      box-shadow:0 3px 0 #e08e37; transition:all .15s ease;
    }
    select:hover,button:hover{background:var(--accent-2);}
    button.primary{background:var(--success); box-shadow:0 3px 0 #15803d;}
    button.primary:hover{background:#16a34a;}

    .stats{display:flex; gap:10px; justify-content:center; margin:10px;}
    .stat{
      background:#fff3e6; border:2px solid var(--border); border-radius:var(--radius);
      padding:8px 12px; box-shadow:inset 0 1px 0 #fff8f0; font-size:15px;
    }

    .board{
      display:grid; gap:4px; justify-content:center; background:var(--panel);
      border-radius:var(--radius); border:3px solid var(--border); padding:10px; box-shadow:var(--shadow);
    }

    .cell{
      width:30px; height:30px; display:grid; place-items:center; background:var(--tile);
      border:2px solid #fce5cc; border-radius:8px; cursor:pointer; font-weight:700;
      font-size:16px; transition:transform .05s ease, background .15s ease;
    }
    .cell:hover{background:var(--tile-hover); transform:translateY(-2px);}
    .cell.revealed{background:var(--tile-revealed); cursor:default; transform:none;}
    .cell.flag{color:var(--warning);}
    .cell.mine{color:var(--danger);}

    .n1{color:#3b82f6;} .n2{color:#16a34a;} .n3{color:#dc2626;} .n4{color:#9333ea;}
    .n5{color:#ea580c;} .n6{color:#0891b2;} .n7{color:#71717a;} .n8{color:#000;}

    footer{margin-top:20px; color:var(--muted); font-size:14px;}
  </style>
</head>
<body>
  <header>
    <h1>üéÄ Cute Classroom Minesweeper</h1>
    <div>
      <label>Level:</label>
      <select id="difficulty">
        <option value="10x10x10">Level 1 (10√ó10 ¬∑ 10 mines)</option>
        <option value="20x20x40">Level 2 (20√ó20 ¬∑ 40 mines)</option>
        <option value="30x30x90" selected>Level 3 (30√ó30 ¬∑ 90 mines)</option>
      </select>
      <button id="newGame" class="primary">New Game</button>
    </div>
    <div class="stats">
      <div class="stat">‚è±Ô∏è Time: <b id="timer">0</b>s</div>
      <div class="stat">üí£ Left: <b id="minesLeft">0</b></div>
      <div class="stat">‚úÖ Cleared: <b id="safeCells">0</b></div>
    </div>
  </header>

  <div class="board" id="board"></div>

  <footer>üí° Tip: First click is always safe! Long-press to plant a flag. üéà</footer>

  <script>
    const boardEl = document.getElementById('board');
    const diffEl = document.getElementById('difficulty');
    const timerEl = document.getElementById('timer');
    const minesLeftEl = document.getElementById('minesLeft');
    const safeCellsEl = document.getElementById('safeCells');
    const newGameBtn = document.getElementById('newGame');

    let rows=30, cols=30, mines=90;
    let grid=[]; let firstClick=true; let revealedCount=0; let flags=0; let timer=null; let time=0; let gameOver=false;

    const DIFF={ '10x10x10':[10,10,10], '20x20x40':[20,20,40], '30x30x90':[30,30,90] };

    function init(){
      [rows,cols,mines]=DIFF[diffEl.value];
      boardEl.innerHTML=''; boardEl.style.gridTemplateColumns=`repeat(${cols},auto)`;
      grid=[]; firstClick=true; revealedCount=0; flags=0; time=0; gameOver=false;
      timerEl.textContent='0'; minesLeftEl.textContent=mines; safeCellsEl.textContent='0';
      if(timer){clearInterval(timer);timer=null;}

      for(let r=0;r<rows;r++){
        grid[r]=[];
        for(let c=0;c<cols;c++){
          const el=document.createElement('div'); el.className='cell';
          boardEl.appendChild(el);
          const cell={r,c,mine:false,count:0,flag:false,revealed:false,el};
          el.addEventListener('click',()=>clickCell(cell));
          el.oncontextmenu=(e)=>{e.preventDefault();toggleFlag(cell);};
          grid[r][c]=cell;
        }
      }
    }

    function startTimer(){ if(timer) return; timer=setInterval(()=>{time++;timerEl.textContent=time;},1000); }

    function neighbors(r,c){const list=[];for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){if(dr||dc){let nr=r+dr,nc=c+dc;if(nr>=0&&nr<rows&&nc>=0&&nc<cols)list.push(grid[nr][nc]);}}return list;}

    function placeMines(sr,sc){let placed=0;while(placed<mines){let r=Math.floor(Math.random()*rows),c=Math.floor(Math.random()*cols);if(Math.abs(r-sr)<=1&&Math.abs(c-sc)<=1)continue;const cell=grid[r][c];if(!cell.mine){cell.mine=true;placed++;}}for(let r=0;r<rows;r++)for(let c=0;c<cols;c++){if(!grid[r][c].mine){grid[r][c].count=neighbors(r,c).filter(n=>n.mine).length;}}}

    function reveal(cell){if(cell.revealed||cell.flag||gameOver)return;cell.revealed=true;cell.el.classList.add('revealed');if(cell.mine){cell.el.textContent='üí£';cell.el.style.background='#ffdede';gameOver=true;alert('üí• Boom! You hit a mine!');return;}revealedCount++;safeCellsEl.textContent=revealedCount;if(cell.count>0){cell.el.textContent=cell.count;cell.el.classList.add('n'+cell.count);}else{neighbors(cell.r,cell.c).forEach(n=>{if(!n.revealed)reveal(n);});}if(revealedCount===rows*cols-mines){alert(`üéâ You cleared the board in ${time}s! Great job!`);gameOver=true;}}

    function clickCell(cell){if(firstClick){placeMines(cell.r,cell.c);firstClick=false;startTimer();}reveal(cell);}

    function toggleFlag(cell){if(cell.revealed||gameOver)return;cell.flag=!cell.flag;cell.el.textContent=cell.flag?'üö©':'';flags+=cell.flag?1:-1;minesLeftEl.textContent=mines-flags;}

    newGameBtn.addEventListener('click',init);
    diffEl.addEventListener('change',init);
    init();
  </script>
</body>
</html>
